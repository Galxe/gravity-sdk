name: E2E Nightly (fuzzy_cluster)

on:
  schedule:
    # Run daily at 00:00 UTC (08:00 UTC+8)
    - cron: '0 0 * * *'
  workflow_dispatch:

# Only one nightly run at a time
concurrency:
  group: ${{ github.workflow }}
  cancel-in-progress: true

jobs:
  e2e-nightly:
    name: E2E Nightly - fuzzy_cluster
    runs-on: [self-hosted, linux]
    timeout-minutes: 120
    environment: default

    steps:
    - name: Checkout
      uses: actions/checkout@v4

    - name: Run fuzzy_cluster Suite
      run: |
        chmod +x gravity_e2e/run_docker.sh
        ./gravity_e2e/run_docker.sh fuzzy_cluster
